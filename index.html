<!DOCTYPE html>
<html>

<head>
    <title>Asignee</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Allan' rel='stylesheet'>
    <link rel="stylesheet" href="styles.css">
</head>

<body>

    <main>
        <header>
            <div class="wrapper">
                <h1>
                    Asignee
                </h1>
                <div class="sub-content">
                    Assign tasks and projects amongst yourself
                </div>
            </div>

        </header>
        <div class="wrapper">

            <div class="create-task">
                <h2>
                    Create Task
                </h2>
                <div class="input-cont">
                    <input type="text" id="taskName" placeholder="Task Name">
                    <button class="btn" onclick="addTask()"><span class="space fa fa-pencil"></span> Create</button>
                </div>
            </div>

            <div class="assign-task">
                <h2>
                    Assign Task
                </h2>
                <div class="container">
                    <div class="new-task">

                        <h3>New Task</h3>
                        <div class="taskWrapper">
                            <div class="target" id="target"></div>
                        </div>
                    </div>

                    <div class="development">
                        <h3> Development</h3>
                        <div class="devWrapper">
                            <div class="devTarget" id="devTarget"></div>
                        </div>
                    </div>
                    <div class="testing">
                        <h3>Testing</h3>
                        <div class="testWrapper">
                            <div class="testTarget" id="testTarget"></div>
                        </div>
                    </div>
                    <div class="completed">
                        <h3>Completed</h3>
                        <div class="compWrapper">
                            <div class="compTarget" id="compTarget"></div>
                        </div>
                    </div>


                </div>
            </div>
        </div>

    </main>
    <script>
        var elements = [],
            elementsDev = [],
            elementsTest = [],
            elementsCompl = [],
            selectedObject = [],
            backObject = [];
        var i = 1;

        function addTask() {
            alert("Task Added Succesfully!!");
            var task = $("#taskName").val();
            var id = task.replace(/\s/g, '');
            elements.push({
                'task': i + ". " + task,
                'id': id,
                'assignee': ''
            });
            var index = elements.length - 1;

            var ele = "<div>" + elements[index].task +
                "</p><br>" +
                "<select id=" + elements[index].id + " name=" + elements[index].id + ">" + ` <option value='volvo' select disabled>Select Enginner</option>
                <option value="john">John</option>
                <option value="abhi">Abhi</option>
                <option value="bharath">Bharath</option> ` + " </select>" + "<button class='btn1' onclick='addToDevelopment(\"" + index + "\")'>Assign</button>" + "</div>";
            $("#target").append(ele);
            i++;
        }

        function addToDevelopment(index) {



            var selectedAssigne = $('#' + elements[index].id + ' :selected').text();
            elementsDev.push({
                'task': elements[index].task,
                'selectedAssigne': selectedAssigne
            });


            for (var k = 0; k < elements.length; k++) {
                for (var t = 0; t < elementsDev.length; t++) {
                    if (elements[k].task === elementsDev[t].task) {

                        elements.splice(k, 1);
                    }
                }
            }

            var insertElemenet = elementsDev.length - 1;

            var ele = "<div><p>" + elementsDev[insertElemenet].task +
                "</p><br><p> Assigned To:" + elementsDev[insertElemenet].selectedAssigne +
                "<button class='btn1' onclick='addToTesting(\"" + insertElemenet + "\")'>Dev Complete</button> </div>";
            $("#devTarget").append(ele);

            var oldEle = "";
            for (var p = 0; p < elements.length; p++) {

                oldEle = oldEle + "<div>" + elements[p].task +
                    "</p><br>" +
                    "<select id=" + elements[p].id + " name=" + elements[p].id + ">" + ` <option value='volvo' select disabled>Select Enginner</option>
                <option value="john">John</option>
                <option value="abhi">Abhi</option>
                <option value="bharath">Bharath</option> ` + " </select>" + "<button class='btn1' onclick='addToDevelopment(\"" + p + "\")'>Assign</button>" + "</div>";

            }
            $("#target").html(oldEle);


        }

        function addToTesting(index) {
            if (backObject.length >= 1) {

                for (var o = 0; o < backObject.length; o++) {
                    elementsDev.push({
                        'task': backObject[o].task,
                        'selectedAssigne': backObject[o].selectedAssigne
                    });
                }
            }

            elementsTest.push({
                'task': elementsDev[index].task,
                'selectedAssigne': elementsDev[index].selectedAssigne
            });

            for (var m = 0; m < elementsDev.length; m++) {
                for (var n = 0; n < elementsTest.length; n++) {

                    if (elementsDev[m].task === elementsTest[n].task) {

                        elementsDev.splice(m, 1);
                    }
                }
            }

            var insertElemenet = elementsTest.length - 1;
            var ele = "<div><p>" + elementsTest[insertElemenet].task +
                "</p><br><p> Assigned To:" + elementsTest[insertElemenet].selectedAssigne +
                "<button class='btn3' onclick='addToComplete(\"" + insertElemenet + "\")'>Test Complete</button></p>" +
                "<button class='btn2' onclick='goBack(\"" + insertElemenet + "\")'>Back to Dev</button> </div>";

            $("#testTarget").append(ele);


            var oldEle = "";
            for (var p = 0; p < elementsDev.length; p++) {

                oldEle = oldEle + "<div><p>" + elementsDev[p].task +
                    "</p><br><p> Assigned To:" + elementsDev[p].selectedAssigne +
                    "<button class='btn1' onclick='addToTesting(\"" + p + "\")'>Dev Complete</button> </div>";

            }
            backObject.splice(0, backObject.length);
            $("#devTarget").html(oldEle);

        }

        function addToComplete(index) {

            elementsCompl.push({
                'task': elementsTest[index].task,
                'selectedAssigne': elementsTest[index].selectedAssigne
            });


            for (var g = 0; g < elementsTest.length; g++) {
                for (var h = 0; h < elementsCompl.length; h++) {
                    if (elementsTest[g].task === elementsCompl[h].task) {
                        elementsTest.splice(g, 1);
                    }
                }
            }
            var insertElemenet = elementsCompl.length - 1;
            var ele = "<div><p>" + elementsCompl[insertElemenet].task +
                "</p><br><p> Assigned To:" + elementsCompl[insertElemenet].selectedAssigne +
                "</div>";
            $("#compTarget").append(ele);


            var oldEle = "";
            for (var p = 0; p < elementsTest.length; p++) {
                oldEle = oldEle + "<div><p>" + elementsTest[p].task +
                    "</p><br><p> Assigned To:" + elementsTest[p].selectedAssigne +
                    "<button class='btn3' onclick='addToComplete(\"" + p + "\")'>Test" + " Complete</button></p>" +
                    "<button class='btn2' onclick='goBack(\"" + p + "\")'>Back to Dev</button></div>";

            }

            $("#testTarget").html(oldEle);

        }

        function goBack(index) {
            backObject.push({
                'task': elementsTest[index].task,
                'selectedAssigne': elementsTest[index].selectedAssigne
            });


            for (var g = 0; g < elementsTest.length; g++) {
                for (var h = 0; h < backObject.length; h++) {
                    if (elementsTest[g].task === backObject[h].task) {
                        elementsTest.splice(g, 1);
                    }
                }
            }

            var backIndex = elementsDev.length;
            var insertElemenet = backObject.length - 1;
            var ele = "<div><p>" + backObject[insertElemenet].task +
                "</p><br><p> Assigned To:" + backObject[insertElemenet].selectedAssigne +
                "<button class='btn1' onclick='addToTesting(\"" + backIndex + "\")'>Dev Complete</button> </div>";
            $("#devTarget").append(ele);


            var oldEle = "";
            for (var p = 0; p < elementsTest.length; p++) {
                oldEle = oldEle + "<div><p>" + elementsTest[p].task +
                    "</p><br><p> Assigned To:" + elementsTest[p].selectedAssigne +
                    "<button class='btn3' onclick='addToComplete(\"" + p + "\")'>Dev Complete</button>" + "</p>" + "<button class='btn2' onclick='goBack(\"" + p + "\")'>Back to Dev</button></div>";

            }

            $("#testTarget").html(oldEle);

        }

    </script>
</body>


</html>
